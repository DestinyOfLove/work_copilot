# SCOPSR网站文章保存功能可行性分析报告

## 需求总结
在访问SCOPSR网站时，能够通过Chrome插件或油猴脚本一键保存：
1. 搜索结果页面的所有文章链接
2. 文章详情页面的具体内容（XPath: `/html/body/table/tbody/tr/td[2]/div[2]`）

## 可行性分析

### 技术可行性：✅ 完全可行

#### 1. 油猴脚本方案
**优点：**
- 安装简单，只需安装Tampermonkey插件
- 跨浏览器兼容（Chrome、Firefox、Edge等）
- 代码维护方便，可直接编辑
- 支持自动更新

**实现要点：**
- 使用`@match`匹配目标网站URL
- 通过DOM操作注入保存按钮
- 使用`GM_download` API下载文件
- 支持批量获取和单篇保存

#### 2. Chrome插件方案
**优点：**
- 功能更强大，可访问更多Chrome API
- 用户体验更好，有独立的界面
- 可以在后台处理大量数据
- 更安全，权限管理严格

**实现要点：**
- 使用Content Script注入页面功能
- Background Service Worker处理批量请求
- Chrome Downloads API保存文件
- Manifest V3规范确保兼容性

### 功能实现细节

#### 搜索结果页面处理
1. **文章链接识别**：通过多种选择器匹配文章链接
   - `a[href*="/xwzx/"]`
   - 表格内的链接元素
   - 包含日期格式的URL

2. **批量处理策略**：
   - 收集所有文章链接
   - 逐个访问获取内容
   - 添加延迟避免请求过快
   - 进度实时反馈

#### 文章内容提取
1. **主要方法**：使用您提供的XPath路径
2. **备用方案**：多个CSS选择器作为降级方案
3. **错误处理**：无法获取时返回提示信息

### 数据保存格式
```json
{
  "title": "文章标题",
  "url": "文章链接",
  "date": "发布日期",
  "content": "文章正文内容"
}
```

### 潜在问题及解决方案

1. **跨域限制**
   - 油猴脚本：通过`@grant`权限解决
   - Chrome插件：在manifest中声明`host_permissions`

2. **动态加载内容**
   - 等待DOM加载完成再执行
   - 使用MutationObserver监听变化

3. **反爬虫机制**
   - 添加请求延迟
   - 模拟正常用户行为
   - 批量请求时控制并发数

4. **大量数据处理**
   - 分批处理，避免内存溢出
   - 实时保存进度
   - 支持断点续传

## 推荐方案：油猴脚本

基于实际需求和使用便利性，推荐使用油猴脚本方案：
- 安装简单，立即可用
- 跨浏览器兼容性好
- 维护更新方便
- 已解决跨域请求问题
- 代码已提供：`scopsr-article-saver.user.js`

## 使用说明

### 油猴脚本安装
1. 安装Tampermonkey浏览器插件
2. 打开脚本管理界面
3. 创建新脚本，粘贴提供的代码
4. 保存并启用脚本

## 总结
该需求完全可行，油猴脚本方案已经能够完美满足您的需求：
- ✅ 批量保存搜索结果页面的所有文章
- ✅ 保存单篇文章内容
- ✅ 处理HTTPS/HTTP混合内容
- ✅ 提供进度反馈和统计信息

建议直接使用提供的油猴脚本，它简单、高效、易维护。